{"id":"perplexity-cli-4zq","title":"Remove session saving from pplx run command","description":"Remove all session-related code from the pplx run command so that one-shot queries are not saved to session files. Only interactive mode should save sessions.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-10T23:14:53.294234-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T23:21:18.993341-03:00","closed_at":"2026-02-10T23:21:18.993341-03:00","close_reason":"Closed"}
{"id":"perplexity-cli-4zq.1","title":"Remove unused session import","description":"Remove the unused session package import from cmd/run.go. The import to remove is line 11: \"perplexity-cli/pkg/session\"","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-10T23:15:06.017327-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T23:15:06.017327-03:00"}
{"id":"perplexity-cli-4zq.2","title":"Remove AddMessage calls","description":"Remove lines 90 and 119 from cmd/run.go that add messages to the session. These lines are:\nLine 90: sess.AddMessage(\"user\", query)\nLine 118-119: cleanContent := perplexity.StripReferences(parsed.Content); sess.AddMessage(\"assistant\", cleanContent)","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-10T23:15:06.017469-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T23:15:06.017469-03:00"}
{"id":"perplexity-cli-4zq.3","title":"Remove session manager creation","description":"Remove lines 75-79 from cmd/run.go that create the session manager. These lines are:\n// Create session manager\nsessionManager, err := session.NewManager()\nif err != nil {\n    return fmt.Errorf(\"failed to create session manager: %w\", err)\n}","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T23:15:06.01855-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T23:16:35.016017-03:00","closed_at":"2026-02-10T23:16:35.016017-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-4zq.3","depends_on_id":"perplexity-cli-4zq","type":"parent-child","created_at":"2026-02-10T23:15:06.02055-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-4zq.4","title":"Remove session creation","description":"Remove lines 81-82 from cmd/run.go that create a new session object. These lines are:\n// Create a new session\nsess := session.NewSession(model, query)","status":"open","priority":0,"issue_type":"task","created_at":"2026-02-10T23:15:06.018624-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T23:15:06.018624-03:00"}
{"id":"perplexity-cli-4zq.5","title":"Verify interactive mode still saves sessions","description":"Verify that interactive mode (pplx command) still saves sessions correctly. Check cmd/interactive.go lines 152 and 204-211 to ensure session saving logic is intact. No code changes needed, just verification.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T23:15:06.018711-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T23:21:10.992053-03:00","closed_at":"2026-02-10T23:21:10.992053-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-4zq.5","depends_on_id":"perplexity-cli-4zq","type":"parent-child","created_at":"2026-02-10T23:15:06.021586-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-4zq.6","title":"Remove session saving code","description":"Remove lines 125-130 from cmd/run.go that save the session to disk. These lines are:\n// Save session\nif err := sessionManager.Save(sess); err != nil {\n    fmt.Fprintf(os.Stderr, \"Warning: failed to save session: %v\\n\", err)\n} else {\n    session.Debugf(\"Session saved: %s\", sess.ID)\n}","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T23:15:06.026549-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T23:19:52.332083-03:00","closed_at":"2026-02-10T23:19:52.332083-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-4zq.6","depends_on_id":"perplexity-cli-4zq","type":"parent-child","created_at":"2026-02-10T23:15:06.027046-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-4zq.7","title":"Remove unused session import","description":"Remove the unused session package import from cmd/run.go. The import to remove is line 11: \"perplexity-cli/pkg/session\"","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T23:15:17.794684-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T23:20:45.275192-03:00","closed_at":"2026-02-10T23:20:45.275192-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-4zq.7","depends_on_id":"perplexity-cli-4zq","type":"parent-child","created_at":"2026-02-10T23:15:17.797045-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-4zq.7","depends_on_id":"perplexity-cli-4zq.9","type":"blocks","created_at":"2026-02-10T23:15:42.45481-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-4zq.7","depends_on_id":"perplexity-cli-4zq.3","type":"blocks","created_at":"2026-02-10T23:15:42.489344-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-4zq.7","depends_on_id":"perplexity-cli-4zq.8","type":"blocks","created_at":"2026-02-10T23:15:50.902219-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-4zq.7","depends_on_id":"perplexity-cli-4zq.6","type":"blocks","created_at":"2026-02-10T23:15:50.931752-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-4zq.8","title":"Remove session creation","description":"Remove lines 81-82 from cmd/run.go that create a new session object. These lines are:\n// Create a new session\nsess := session.NewSession(model, query)","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T23:15:17.795801-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T23:16:54.225282-03:00","closed_at":"2026-02-10T23:16:54.225282-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-4zq.8","depends_on_id":"perplexity-cli-4zq","type":"parent-child","created_at":"2026-02-10T23:15:17.796381-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-4zq.9","title":"Remove AddMessage calls","description":"Remove lines 90 and 119 from cmd/run.go that add messages to the session. These lines are:\nLine 90: sess.AddMessage(\"user\", query)\nLine 118-119: cleanContent := perplexity.StripReferences(parsed.Content); sess.AddMessage(\"assistant\", cleanContent)","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T23:15:17.805819-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T23:18:35.035024-03:00","closed_at":"2026-02-10T23:18:35.035024-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-4zq.9","depends_on_id":"perplexity-cli-4zq","type":"parent-child","created_at":"2026-02-10T23:15:17.806343-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-5y4","title":"Make Config File Optional","description":"Make the config file optional so that users can use pplx run and pplx interactive with just the PPLX_API_KEY environment variable without requiring a config file. The config file should be optional for all commands.","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-02-10T22:46:33.543405-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T23:01:53.41095-03:00","closed_at":"2026-02-10T23:01:53.41095-03:00","close_reason":"Closed"}
{"id":"perplexity-cli-5y4.1","title":"Remove Config File Read from root.go","description":"Simplify initConfig() in cmd/root.go to only set up environment variables and defaults, without attempting to read the config file. \n\nChanges needed:\n1. Remove the viper.ReadInConfig() call from initConfig() (line 73)\n2. Keep environment variable setup (viper.SetEnvPrefix and viper.AutomaticEnv)\n3. Keep config file path setup for documentation purposes\n4. Remove the print statement about config file usage (lines 73-75)\n\nThis eliminates the duplicate viper setup and prevents early config loading failures.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T22:46:48.641208-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T22:48:43.80912-03:00","closed_at":"2026-02-10T22:48:43.80912-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-5y4.1","depends_on_id":"perplexity-cli-5y4","type":"parent-child","created_at":"2026-02-10T22:46:48.641837-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-5y4.2","title":"Fix Error Handling in config.Load()","description":"Update the error handling in pkg/config/config.go to properly catch 'file not found' errors using os.IsNotExist() instead of type assertion.\n\nChanges needed in Load() function (around line 72):\n1. Replace the type assertion '_, ok := err.(viper.ConfigFileNotFoundError)' with os.IsNotExist()\n2. Only return an error if it's NOT a file-not-found error\n3. Ensure proper error handling for YAML parsing errors specifically\n4. Keep the viper.Unmarshal call to get values from environment variables\n\nThis makes the config file truly optional by not failing when it doesn't exist.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T22:46:55.622281-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T22:49:22.03002-03:00","closed_at":"2026-02-10T22:49:22.03002-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-5y4.2","depends_on_id":"perplexity-cli-5y4","type":"parent-child","created_at":"2026-02-10T22:46:55.622857-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-5y4.3","title":"Improve Config Directory Handling","description":"Ensure the config directory is created if it doesn't exist, but don't fail if creation fails.\n\nChanges needed in Load() function (lines 54-56):\n1. Change the os.MkdirAll error handling to log a warning instead of returning an error\n2. Use fmt.Fprintf(os.Stderr, ...) for the warning message\n3. The app should still work with just environment variables even if directory creation fails\n4. This handles read-only filesystems gracefully\n\nThis ensures the app works in environments where ~/.pplx cannot be created.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T22:47:01.110068-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T22:50:37.799281-03:00","closed_at":"2026-02-10T22:50:37.799281-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-5y4.3","depends_on_id":"perplexity-cli-5y4","type":"parent-child","created_at":"2026-02-10T22:47:01.110628-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-5y4.4","title":"Add Config File Existence Check Before Read","description":"Before calling viper.ReadInConfig(), check if the config file exists using os.Stat() and only attempt to read it if it exists.\n\nChanges needed in Load() function (around line 72):\n1. Add a check 'if _, err := os.Stat(configFile); err == nil {' before calling viper.ReadInConfig()\n2. Only call ReadInConfig() if the file exists\n3. This eliminates the need for complex error handling since we know the file exists\n4. Keep the env variable setup and viper.Unmarshal() calls\n\nThis is a more explicit and reliable approach than trying to catch error types.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T22:47:08.306877-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T22:51:12.352328-03:00","closed_at":"2026-02-10T22:51:12.352328-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-5y4.4","depends_on_id":"perplexity-cli-5y4","type":"parent-child","created_at":"2026-02-10T22:47:08.307464-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-5y4.5","title":"Update Error Messages","description":"Improve error messages to clearly indicate that the config file is optional and provide guidance on using environment variables.\n\nChanges needed:\n1. Update the Config.Validate() error message (line 124) to be more helpful\n2. Ensure it mentions both options: PPLX_API_KEY env var or config file\n3. Add context that config file is optional\n4. Example message: 'API key is required. Set PPLX_API_KEY environment variable or add api_key to ~/.pplx/config.yaml (config file is optional)'\n\nThis provides better user experience when they haven't configured the app yet.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T22:47:28.788543-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T22:51:41.005657-03:00","closed_at":"2026-02-10T22:51:41.005657-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-5y4.5","depends_on_id":"perplexity-cli-5y4","type":"parent-child","created_at":"2026-02-10T22:47:28.789079-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-5y4.5","depends_on_id":"perplexity-cli-5y4.4","type":"blocks","created_at":"2026-02-10T22:47:56.465445-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-5y4.6","title":"Verify All Commands Work Without Config","description":"Verify that all commands (run, interactive, session list, session search) work without a config file when PPLX_API_KEY is set as an environment variable.\n\nTesting steps:\n1. Remove config file if it exists: rm -f ~/.pplx/config.yaml\n2. Set PPLX_API_KEY environment variable\n3. Test pplx run 'test query'\n4. Test pplx interactive mode (just enter and exit with /q)\n5. Test pplx session list\n6. Test error message when API key is missing\n7. Test with config file present to ensure backward compatibility\n\nNo code changes needed - this is testing only.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-10T22:47:40.353408-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T23:01:29.953069-03:00","closed_at":"2026-02-10T23:01:29.953069-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-5y4.6","depends_on_id":"perplexity-cli-5y4","type":"parent-child","created_at":"2026-02-10T22:47:40.353915-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-5y4.6","depends_on_id":"perplexity-cli-5y4.1","type":"blocks","created_at":"2026-02-10T22:47:56.435305-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-5y4.6","depends_on_id":"perplexity-cli-5y4.3","type":"blocks","created_at":"2026-02-10T22:47:56.436725-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-5y4.6","depends_on_id":"perplexity-cli-5y4.4","type":"blocks","created_at":"2026-02-10T22:48:12.861397-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-5y4.6","depends_on_id":"perplexity-cli-5y4.5","type":"blocks","created_at":"2026-02-10T22:48:12.890463-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-5y4.6","depends_on_id":"perplexity-cli-5y4.2","type":"blocks","created_at":"2026-02-10T22:48:18.656035-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-dm3","title":"Build Perplexity CLI Application","description":"Build a Go CLI using Cobra for the Perplexity Sonar API with one-shot queries (pplx run), interactive REPL mode (pplx), session persistence in ~/.pplx/sessions/, and session management commands (pplx session search, pplx session -l). Default model: sonar. API key from PPLX_API_KEY env var. Citations formatted as bracket numbers at end of sentences.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-10T20:41:44.638353-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T20:51:10.626321-03:00","closed_at":"2026-02-10T20:51:10.626321-03:00","close_reason":"Closed"}
{"id":"perplexity-cli-dm3.1","title":"Step 1: Project Setup and Dependencies","description":"Initialize Go module and install Cobra framework. Files: go.mod, go.sum, main.go, cmd/root.go. Install dependencies: cobra, viper. Run 'go mod init github.com/user/perplexity-cli' and 'go get github.com/spf13/cobra github.com/spf13/viper'.\n\nAC:\n- go.mod exists with module name\n- cobra and viper in go.sum\n- main.go with basic cobra setup\n- cmd/root.go with root command","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T20:42:01.586496-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T20:44:59.735244-03:00","closed_at":"2026-02-10T20:44:59.735244-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-dm3.1","depends_on_id":"perplexity-cli-dm3","type":"parent-child","created_at":"2026-02-10T20:42:01.587186-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-dm3.10","title":"Step 10: Testing and Build","description":"Write tests and create build configuration. Files: various *_test.go, Makefile.\n\nKey implementation:\n- Unit tests for citation parsing with various formats\n- Unit tests for session file read/write operations\n- Unit tests for API client with mock responses\n- Integration tests for end-to-end flows\n- Makefile with targets: build, test, install, clean\n- Test API client by mocking HTTP responses\n- Test session management with temp directories\n\nAC:\n- Tests pass: go test ./...\n- make build produces binary\n- make test runs all tests\n- Binary can be installed locally","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T20:42:11.514384-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T20:51:10.556536-03:00","closed_at":"2026-02-10T20:51:10.556536-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-dm3.10","depends_on_id":"perplexity-cli-dm3","type":"parent-child","created_at":"2026-02-10T20:42:11.51491-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.10","depends_on_id":"perplexity-cli-dm3.4","type":"blocks","created_at":"2026-02-10T20:42:17.809591-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.10","depends_on_id":"perplexity-cli-dm3.5","type":"blocks","created_at":"2026-02-10T20:42:17.990501-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.10","depends_on_id":"perplexity-cli-dm3.6","type":"blocks","created_at":"2026-02-10T20:42:18.196134-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.10","depends_on_id":"perplexity-cli-dm3.7","type":"blocks","created_at":"2026-02-10T20:42:18.358459-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.10","depends_on_id":"perplexity-cli-dm3.8","type":"blocks","created_at":"2026-02-10T20:42:18.535792-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-dm3.2","title":"Step 2: Create Core API Client","description":"Build lightweight Perplexity API client for chat completions with citation support. Files: pkg/perplexity/client.go, pkg/perplexity/types.go, pkg/perplexity/citations.go.\n\nKey implementation:\n- API endpoint: https://api.perplexity.ai/chat/completions\n- HTTP client with Bearer token auth (PPLX_API_KEY)\n- Request/response structs matching Perplexity API format\n- Citation extraction using regex pattern \\[\\d+\\] to find citations like [1], [2]\n- Map citations to search_results array by index\n- Format references with # References heading at end\n\nAC:\n- Client can make API calls\n- Types match Perplexity API schema\n- Citation parser extracts bracket numbers\n- References formatted correctly","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T20:42:02.967231-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T20:45:33.693454-03:00","closed_at":"2026-02-10T20:45:33.693454-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-dm3.2","depends_on_id":"perplexity-cli-dm3","type":"parent-child","created_at":"2026-02-10T20:42:02.967746-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.2","depends_on_id":"perplexity-cli-dm3.1","type":"blocks","created_at":"2026-02-10T20:42:14.505059-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-dm3.3","title":"Step 3: Session Management System","description":"Implement JSON session storage with timestamp-based filenames. Files: pkg/session/manager.go, pkg/session/types.go, pkg/session/utils.go.\n\nKey implementation:\n- Storage path: ~/.pplx/sessions/\n- Filename format: 20060102-150405.000.json (Go time format with milliseconds)\n- Session JSON structure: timestamp, messages array (role/content), metadata (model, initial_query)\n- CRUD operations: Create, Read, Update (append), List\n- Directory creation if doesn't exist\n- Atomic file writes (temp then rename)\n\nAC:\n- Session files created with correct format\n- JSON structure includes all required fields\n- Directory auto-created\n- Can read and write sessions","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T20:42:03.890479-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T20:46:05.941959-03:00","closed_at":"2026-02-10T20:46:05.941959-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-dm3.3","depends_on_id":"perplexity-cli-dm3","type":"parent-child","created_at":"2026-02-10T20:42:03.890988-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.3","depends_on_id":"perplexity-cli-dm3.1","type":"blocks","created_at":"2026-02-10T20:42:14.62992-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-dm3.4","title":"Step 4: Implement pplx run Command","description":"Create one-shot query command. File: cmd/run.go.\n\nCommand syntax: pplx run \"query string\" [--model sonar]\n\nKey implementation:\n- Accept query as positional argument\n- Make single API call with messages array containing user query only\n- Display content with citations inline (e.g., \"Paris is the capital of France. [1]\")\n- Add # References section at end with numbered list mapping to URLs\n- Support --model flag to override default\n- Save session after completion\n- Handle API errors gracefully\n\nAC:\n- pplx run \"What is 2+2?\" works\n- Output includes citations and references\n- Session file created after execution\n- --model flag works","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T20:42:04.988614-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T20:46:49.621518-03:00","closed_at":"2026-02-10T20:46:49.621518-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-dm3.4","depends_on_id":"perplexity-cli-dm3","type":"parent-child","created_at":"2026-02-10T20:42:04.989182-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.4","depends_on_id":"perplexity-cli-dm3.2","type":"blocks","created_at":"2026-02-10T20:42:14.774051-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.4","depends_on_id":"perplexity-cli-dm3.3","type":"blocks","created_at":"2026-02-10T20:42:15.256661-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-dm3.5","title":"Step 5: Implement Interactive Mode (pplx)","description":"Build REPL-style interactive session. File: cmd/interactive.go or integrate in root.go.\n\nBehavior: When pplx called with no arguments, enter interactive mode.\n\nKey implementation:\n- Display prompt: You:\n- Read line-by-line using bufio.Scanner\n- Exit commands: /q, /quit, ctrl+c (handle SIGINT with signal.Notify)\n- Maintain conversation history in memory as message array\n- CRITICAL: Strip references section from assistant messages before adding to API context\n- Auto-save session after each exchange\n- Format output: PPLX: \u003ccontent with citations\u003e\\n\\n## References:\\n[1] \u003ctitle\u003e - \u003curl\u003e\n- Handle multi-line input elegantly\n- Limit context window to last N messages (default 20)\n\nAC:\n- pplx with no args enters REPL\n- Can have back-and-forth conversation\n- /q and ctrl+c exit cleanly\n- Session auto-saves\n- References not sent in API context","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T20:42:06.473029-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T20:47:12.617313-03:00","closed_at":"2026-02-10T20:47:12.617313-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-dm3.5","depends_on_id":"perplexity-cli-dm3","type":"parent-child","created_at":"2026-02-10T20:42:06.473641-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.5","depends_on_id":"perplexity-cli-dm3.2","type":"blocks","created_at":"2026-02-10T20:42:15.386127-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.5","depends_on_id":"perplexity-cli-dm3.3","type":"blocks","created_at":"2026-02-10T20:42:15.536136-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-dm3.6","title":"Step 6: Implement Session Search Command","description":"Create pplx session search command. Files: cmd/session.go (parent), cmd/session_search.go.\n\nCommand syntax: pplx session search \"search term\"\n\nKey implementation:\n- Parent session command with subcommands\n- Search through ~/.pplx/sessions/*.json files\n- Use Go's os.ReadDir and strings.Contains for search (no external grep needed)\n- Case-insensitive search by default\n- Return matching filenames with context (show first query or matching snippet)\n- Support regex patterns (optional/advanced)\n\nAC:\n- pplx session search \"France\" finds relevant sessions\n- Output shows filenames and context\n- Case-insensitive by default\n- Works with partial matches","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T20:42:07.497152-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T20:47:35.79578-03:00","closed_at":"2026-02-10T20:47:35.79578-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-dm3.6","depends_on_id":"perplexity-cli-dm3","type":"parent-child","created_at":"2026-02-10T20:42:07.497704-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.6","depends_on_id":"perplexity-cli-dm3.3","type":"blocks","created_at":"2026-02-10T20:42:15.734603-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-dm3.7","title":"Step 7: Implement Session List Command","description":"Create pplx session list command. File: cmd/session_list.go.\n\nCommand syntax: pplx session -l 10 or pplx session list -n 10\n\nKey implementation:\n- Read all session files from ~/.pplx/sessions/\n- Sort by filename (timestamp) descending (newest first)\n- Display: \u003ctimestamp\u003e - \u003cinitial_query_truncated\u003e\n- Default limit: 10 sessions\n- Support -l/--limit flag for custom count\n- Format: simple list or tabular output\n\nAC:\n- pplx session -l 10 lists 10 most recent sessions\n- Sorted by timestamp descending\n- Shows initial query preview\n- Flag works for custom limits","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T20:42:08.517217-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T20:47:54.091807-03:00","closed_at":"2026-02-10T20:47:54.091807-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-dm3.7","depends_on_id":"perplexity-cli-dm3","type":"parent-child","created_at":"2026-02-10T20:42:08.517919-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.7","depends_on_id":"perplexity-cli-dm3.3","type":"blocks","created_at":"2026-02-10T20:42:15.888983-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-dm3.8","title":"Step 8: Configuration and Environment Setup","description":"Add configuration management and API key handling. File: pkg/config/config.go.\n\nKey implementation:\n- Read API key from PPLX_API_KEY environment variable (primary method)\n- Support optional config file at ~/.pplx/config.yaml for defaults\n- Config options: default_model, max_tokens, temperature, search_context_size\n- Validate API key presence on startup\n- Load config using Viper\n- Create ~/.pplx directory structure on first run\n\nAC:\n- PPLX_API_KEY env var works\n- Config file loads if present\n- Defaults set for all options\n- Clear error if API key missing","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T20:42:09.438083-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T20:46:28.457743-03:00","closed_at":"2026-02-10T20:46:28.457743-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-dm3.8","depends_on_id":"perplexity-cli-dm3","type":"parent-child","created_at":"2026-02-10T20:42:09.438553-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.8","depends_on_id":"perplexity-cli-dm3.1","type":"blocks","created_at":"2026-02-10T20:42:16.241326-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-dm3.9","title":"Step 9: Error Handling and User Experience","description":"Add comprehensive error handling and UX improvements. Modify all command files.\n\nKey implementation:\n- Graceful API error handling (rate limits, auth failures, network issues)\n- Clear error messages for missing API key\n- Progress indicators for API calls (spinner or \"Thinking...\")\n- Signal handling for clean shutdown (SIGINT, SIGTERM)\n- Colorized output using fatih/color (optional but nice)\n- Comprehensive --help documentation for all commands\n- Input validation (empty queries, etc.)\n\nAC:\n- API errors show helpful messages\n- Missing API key error is clear\n- Ctrl+C exits gracefully and saves session\n- All commands have good help text\n- Colors used appropriately","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T20:42:10.673309-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T20:49:17.598026-03:00","closed_at":"2026-02-10T20:49:17.598026-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-dm3.9","depends_on_id":"perplexity-cli-dm3","type":"parent-child","created_at":"2026-02-10T20:42:10.673871-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.9","depends_on_id":"perplexity-cli-dm3.4","type":"blocks","created_at":"2026-02-10T20:42:16.398617-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.9","depends_on_id":"perplexity-cli-dm3.5","type":"blocks","created_at":"2026-02-10T20:42:16.883938-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.9","depends_on_id":"perplexity-cli-dm3.6","type":"blocks","created_at":"2026-02-10T20:42:17.066601-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.9","depends_on_id":"perplexity-cli-dm3.7","type":"blocks","created_at":"2026-02-10T20:42:17.357303-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-dm3.9","depends_on_id":"perplexity-cli-dm3.8","type":"blocks","created_at":"2026-02-10T20:42:17.622084-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-rrt","title":"Add Taskfile for Go package installation","description":"Create a Taskfile.yaml to make the perplexity-cli Go package installable via Task (taskfile.dev), providing a modern alternative to the existing Makefile with improved cross-platform support and task dependencies. Binary name: pplx. Install location: Auto-detect (GOPATH first, fall back to /usr/local/bin).","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-10T22:31:23.603757-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T22:33:46.514094-03:00","closed_at":"2026-02-10T22:33:46.514094-03:00","close_reason":"Closed"}
{"id":"perplexity-cli-rrt.1","title":"Create Taskfile.yaml","description":"Create the main Taskfile.yaml with all build, install, and development tasks.\n\n**Files to Change:**\n- Create Taskfile.yaml (new file)\n\n**Implementation Details:**\n1. Define global vars: BUILD_DIR=build, BINARY_NAME=pplx, MAIN_FILE=main.go\n2. Implement default task that runs build\n3. Implement build task with:\n   - mkdir -p {{.BUILD_DIR}}\n   - go build -o {{.BUILD_DIR}}/{{.BINARY_NAME}} {{.MAIN_FILE}}\n   - sources: **/*.go, go.mod, go.sum\n   - generates: {{.BUILD_DIR}}/{{.BINARY_NAME}}\n4. Implement install task with auto-detection:\n   - Always run clean and build first\n   - Check if GOPATH is set and GOPATH/bin exists\n   - If yes, install to /bin/{{.BINARY_NAME}}\n   - If no, install to /usr/local/bin/{{.BINARY_NAME}}\n   - Use install -m 0755 for proper permissions\n5. Implement clean task to remove build/ directory and coverage files\n6. Port additional Makefile targets: test, test-coverage, fmt, lint, deps, run\n7. Implement verify task that chains build + test\n8. Implement all task that runs clean, build, and test\n\n**Key Requirements:**\n- Keep build/ directory (not bin/) to match existing convention\n- Build from root main.go (not cmd/ subdirectory)\n- Use shell script for install auto-detection logic\n- Include proper task descriptions","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-10T22:31:28.550209-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T22:31:58.574597-03:00","closed_at":"2026-02-10T22:31:58.574597-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-rrt.1","depends_on_id":"perplexity-cli-rrt","type":"parent-child","created_at":"2026-02-10T22:31:28.550858-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-rrt.2","title":"Verify Task installation","description":"Verify that Task (taskfile.dev) is installed on the system and provide installation instructions if not.\n\n**Implementation Details:**\n1. Check if task command is available: which task or task --version\n2. If not installed, provide installation instructions:\n   - Option 1: go install github.com/go-task/task/v3/cmd/task@latest\n   - Option 2: Package manager (brew install go-task, etc.)\n3. Verify task --version works\n4. This is a prerequisite validation step\n\n**Expected Output:**\n- Confirmation that task is installed\n- Version information\n- Or clear installation instructions","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-10T22:31:29.658182-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T22:32:09.348429-03:00","closed_at":"2026-02-10T22:32:09.348429-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-rrt.2","depends_on_id":"perplexity-cli-rrt","type":"parent-child","created_at":"2026-02-10T22:31:29.658749-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-rrt.3","title":"Test Taskfile tasks","description":"Test and validate all Taskfile tasks work correctly.\n\n**Test Cases:**\n1. **Task list validation**\n   - Run: task --list\n   - Expected: Shows all available tasks with descriptions\n\n2. **Build task**\n   - Run: task clean (ensure clean state)\n   - Run: task build\n   - Verify: build/pplx binary exists and is executable\n   - Verify: ./build/pplx --help works\n\n3. **Incremental build**\n   - Run: task build (second time)\n   - Expected: Task reports 'up-to-date' and skips build\n   - Run: touch main.go\n   - Run: task build\n   - Expected: Rebuilds because source changed\n\n4. **Clean task**\n   - Run: task clean\n   - Verify: build/ directory is removed\n\n5. **Install task**\n   - Run: task install\n   - Verify: Binary installed to appropriate location\n   - Run: which pplx to confirm in PATH\n   - Run: pplx --help to verify works\n\n6. **Test task**\n   - Run: task test\n   - Verify: All tests pass\n\n7. **Verify task**\n   - Run: task verify\n   - Verify: Builds and runs tests successfully\n\n**Dependencies:**\n- Requires Taskfile.yaml to be created first\n- Requires Task to be installed","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-10T22:31:32.291703-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T22:33:19.933861-03:00","closed_at":"2026-02-10T22:33:19.933861-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-rrt.3","depends_on_id":"perplexity-cli-rrt","type":"parent-child","created_at":"2026-02-10T22:31:32.292311-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-rrt.3","depends_on_id":"perplexity-cli-rrt.1","type":"blocks","created_at":"2026-02-10T22:31:39.08442-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-rrt.3","depends_on_id":"perplexity-cli-rrt.2","type":"blocks","created_at":"2026-02-10T22:31:41.242188-03:00","created_by":"adrielmartins"}]}
{"id":"perplexity-cli-rrt.4","title":"Update documentation","description":"Update README.md with Taskfile usage instructions.\n\n**Files to Change:**\n- README.md (update installation section)\n\n**Implementation Details:**\n1. Add Taskfile prerequisites section:\n   - Link to taskfile.dev\n   - Installation: go install github.com/go-task/task/v3/cmd/task@latest\n\n2. Add Quick Install section:\n   - task install (one command to build and install)\n\n3. List all available tasks:\n   - task build - Build the binary\n   - task install - Install to GOPATH/bin or /usr/local/bin\n   - task clean - Clean build artifacts\n   - task test - Run tests\n   - task test-coverage - Run tests with coverage\n   - task fmt - Format code\n   - task lint - Run linter\n   - task deps - Download dependencies\n   - task run - Build and run\n   - task verify - Build and test\n   - task all - Clean, build, and test\n\n4. Compare with existing Makefile\n   - Explain Taskfile advantages: better incremental builds, task dependencies\n\n**Dependencies:**\n- Requires Taskfile.yaml to be created and tested","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-10T22:31:34.054773-03:00","created_by":"adrielmartins","updated_at":"2026-02-10T22:33:42.385487-03:00","closed_at":"2026-02-10T22:33:42.385487-03:00","close_reason":"Closed","dependencies":[{"issue_id":"perplexity-cli-rrt.4","depends_on_id":"perplexity-cli-rrt","type":"parent-child","created_at":"2026-02-10T22:31:34.05559-03:00","created_by":"adrielmartins"},{"issue_id":"perplexity-cli-rrt.4","depends_on_id":"perplexity-cli-rrt.3","type":"blocks","created_at":"2026-02-10T22:31:43.38621-03:00","created_by":"adrielmartins"}]}
